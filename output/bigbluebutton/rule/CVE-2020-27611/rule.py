import sys
import re
import json

def main():
    if len(sys.argv) < 2:
        print("[]")
        return
    
    file_path = sys.argv[1]
    
    try:
        with open(file_path, 'r', encoding='utf-8') as file:
            content = file.read()
    except:
        print("[]")
        return
    
    lines = content.split('\n')
    results = []
    
    # 正则表达式匹配旧的STUN服务器配置
    pattern = r'<constructor-arg index="0" value="stun:stun\.freeswitch\.org"/>'
    
    for line_num, line in enumerate(lines, 1):
        if re.search(pattern, line):
            results.append({
                "loc": str(line_num),
                "reason": "使用了不推荐的STUN服务器stun.freeswitch.org，应该改为stun:stun.l.google.com:19302"
            })
    
    print(json.dumps(results, ensure_ascii=False))

if __name__ == "__main__":
    main()